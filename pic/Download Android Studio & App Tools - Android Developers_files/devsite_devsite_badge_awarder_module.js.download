(function(_ds){var window=this;var UM=/\/redeem.*|\/u[\/]?.*|\/settings[\/]?.*?/,VM=function(a){if("click"===a.getAttribute("type")){var b=a.getAttribute("target");b?(b=document.getElementById(b))?a.eventHandler.listen(b,"click",()=>{a.yb()}):a.destroy():a.destroy()}else a.eventHandler.listen(document.body,["devsite-page-loaded","devsite-page-changed","devsite-signed-in-state-updated"],()=>{a.yb()}),a.yb()},WM=class extends _ds.E{constructor(){super(...arguments);this.eventHandler=new _ds.G;this.g=!1}connectedCallback(){this.hasAttribute("badge")?
VM(this):this.destroy()}async yb(){if(!UM.exec(document.location.pathname)&&"error"!==document.body.getAttribute("type")&&!this.g){this.g=!0;var a=this.getAttribute("badge"),b=this.getAttribute("type");if(a){var c=this.hasAttribute("signin-required"),d=this.hasAttribute("profile-required"),e=await _ds.x(),f=await e.isSignedIn();if(f||!c&&!d){c=null;var g=new _ds.Lv;try{c=await g.oa()}catch(l){}if(d&&!c)this.g=!1;else{a=new URL(a,document.location.origin);d=a.pathname;d.endsWith("/_badge.yaml")&&d.replace("/_badge.yaml",
"");d=0;this.hasAttribute("delay")&&(d=Number(this.getAttribute("delay"))||0);if("position"===b)try{await e.intersectionEnterForElement(this)}catch(l){return}d&&await _ds.uj(1E3*d);b=new _ds.yv;if(f){f=new _ds.Av;e=null;try{e=await f.ob()}catch(l){}var h,k;if("ELIGIBILITY_ELIGIBLE"===(null==(h=e)?void 0:null==(k=h.createProfile)?void 0:k.status)){h=!1;try{const l=await b.kd({url:a.href});h=!(null==l||!l.id)}catch(l){if(404!==l.code)return}if(!h)try{let l;await b.yb({url:a.href,profileId:null==(l=
c)?void 0:l.profileId})}catch(l){}}}else try{await b.yb({url:a.href})}catch(l){}this.destroy()}}else this.g=!1}else this.destroy()}}destroy(){this.parentNode&&this.parentNode.removeChild(this)}disconnectedCallback(){_ds.I(this.eventHandler)}};WM.prototype.disconnectedCallback=WM.prototype.disconnectedCallback;WM.prototype.connectedCallback=WM.prototype.connectedCallback;try{window.customElements.define("devsite-badge-awarder",WM)}catch(a){console.warn("devsite.app.customElement.DevsiteBadgeAwarder",a)};})(_ds_www);
